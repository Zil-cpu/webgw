<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sains Quality Computer</title>

<link rel="icon" href="logo.png">
<script src="https://unpkg.com/html5-qrcode"></script>

<style>
body{
font-family:Arial;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
margin:0;
color:white;
text-align:center;
}

.header{
background:black;
padding:15px;
font-size:22px;
font-weight:bold;
}

.jam{
font-size:18px;
margin-top:5px;
color:#00ffcc;
}

.container{
background:white;
color:black;
margin:20px;
padding:20px;
border-radius:15px;
box-shadow:0 0 20px rgba(0,0,0,0.4);
}

input,select,button{
padding:10px;
margin:5px;
width:90%;
border-radius:8px;
border:1px solid #ccc;
}

button{
background:#007bff;
color:white;
font-weight:bold;
}

table{
width:100%;
margin-top:15px;
border-collapse:collapse;
}

th,td{
border:1px solid #ccc;
padding:8px;
font-size:13px;
}

th{
background:#007bff;
color:white;
}

.logo{
width:80px;
margin-top:10px;
}

.loginbox{
margin-top:100px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginPage" class="loginbox">
<img src="logo.png" class="logo">
<h2>Sains Quality Computer</h2>
<input type="password" id="pass" placeholder="Password">
<br>
<button onclick="login()">LOGIN</button>
</div>

<!-- APP -->
<div id="app" style="display:none;">
<div class="header">
Sains Quality Service Center
<div class="jam" id="jam"></div>
</div>

<div class="container">
<h3>Input Barang Service</h3>

<input id="nama" placeholder="Nama Barang">
<input id="sn" placeholder="Serial Number">

<input type="file" id="foto" accept="image/*" capture="environment" style="margin:10px;">
<div id="reader" style="width:250px;margin:auto;"></div>

<select id="status">
<option>Masuk</option>
<option>Selesai</option>
<option>Diambil</option>
</select>

<br>
<button onclick="tambah()" class="btn btn-primary">Simpan</button>
<button onclick="download()">DOWNLOAD EXCEL</button>
<button onclick="printStruk()">PRINT STRUK</button>
<button onclick="backup()">BACKUP</button>
<button onclick="restore()">RESTORE</button>

<table id="tabel">
<tr>
<th>Waktu</th>
<th>Barang</th>
<th>SN</th>
<th>Status</th>
<th>Aksi</th>
</tr>
</table>

</div>
</div>

<audio id="beep">
<source src="https://www.soundjay.com/misc/sounds/barcode-beep.mp3">
</audio>

<script>

// LOGIN
function login(){
let p=document.getElementById("pass").value;
if(p==="12345"){
document.getElementById("loginPage").style.display="none";
document.getElementById("app").style.display="block";
}else{
alert("Password salah");
}
}

// JAM REALTIME
function jam(){
let t=new Date();
document.getElementById("jam").innerHTML=t.toLocaleString();
}
setInterval(jam,1000);

// TAMBAH DATA
function tambah(){

let nama = document.getElementById("nama").value;
let sn = document.getElementById("sn").value;
let status = document.getElementById("status").value;
let fileInput = document.getElementById("foto");
let file = fileInput.files[0];

if(nama.trim()==""){
alert("Isi nama barang dulu bro");
return;
}

let waktu = new Date().toLocaleString();

// ADA FOTO
if(file){
let reader = new FileReader();

reader.onload = function(e){
let foto = e.target.result;

data.push({
waktu:waktu,
foto:foto,
nama:nama,
sn:sn,
status:status
});

localStorage.setItem("dataService", JSON.stringify(data));
render();
document.getElementById("beep").play();
}

reader.readAsDataURL(file);

}else{
// TANPA FOTO
data.push({
waktu:waktu,
foto:"",
nama:nama,
sn:sn,
status:status
});

localStorage.setItem("dataService", JSON.stringify(data));
render();
document.getElementById("beep").play();
}
}


// SAVE
function saveData(){
localStorage.setItem("tabel",document.getElementById("tabel").innerHTML);
}

window.onload=function(){
if(localStorage.getItem("tabel")){
document.getElementById("tabel").innerHTML=localStorage.getItem("tabel");
}
}

// HAPUS PASSWORD ADMIN
function hapus(btn){
let pass = prompt("Password hapus:");
if(pass!=="admin123"){
alert("Password salah");
return;
}
if(confirm("Hapus data?")){
let row = btn.parentNode.parentNode;
row.remove();
saveData();
}
}

// EDIT
function editRow(btn){
let row = btn.parentNode.parentNode;

let nama = prompt("Edit nama", row.cells[1].innerHTML);
let sn = prompt("Edit SN", row.cells[2].innerHTML);
let status = prompt("Edit status", row.cells[3].innerHTML);

if(nama){
row.cells[1].innerHTML=nama;
row.cells[2].innerHTML=sn;
row.cells[3].innerHTML=status;
saveData();
}
}

// DOWNLOAD EXCEL
function download(){
let table=document.getElementById("tabel").outerHTML;
let url='data:application/vnd.ms-excel,'+ encodeURIComponent(table);
let link=document.createElement("a");
link.href=url;
link.download="data_service.xls";
link.click();
}

// PRINT STRUK
function printStruk(){
let isi=document.getElementById("tabel").outerHTML;
let win=window.open("");
win.document.write("<h3>Sains Quality Service Center</h3>");
win.document.write(isi);
win.print();
}

// BACKUP
function backup(){
let data=localStorage.getItem("tabel");
let blob=new Blob([data]);
let a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="backup_toko.txt";
a.click();
}

// RESTORE
function restore(){
let data=prompt("Paste backup:");
if(data){
localStorage.setItem("tabel",data);
location.reload();
}
}

// SCAN BARCODE
function startScan(){
document.getElementById("reader").innerHTML="";
let scanner = new Html5Qrcode("reader");

scanner.start(
{ facingMode: "environment" },
{ fps: 10, qrbox: 250 },
(qr)=>{
document.getElementById("sn").value=qr;
document.getElementById("beep").play();
scanner.stop();
document.getElementById("reader").innerHTML="";
},
(err)=>{}
);
}

function render(){
let html=`
<tr>
<th>Waktu</th>
<th>Foto</th>
<th>Barang</th>
<th>SN</th>
<th>Status</th>
<th>Aksi</th>
</tr>`;

data.forEach((d,i)=>{
html+=`
<tr>
<td>${d.waktu}</td>
<td>${d.foto?'<img src="'+d.foto+'" width="60">':""}</td>
<td>${d.nama}</td>
<td>${d.sn}</td>
<td>${d.status}</td>
<td>
<button onclick="hapus(${i})">Hapus</button>
</td>
</tr>`;
});

document.getElementById("tabel").innerHTML=html;
}

</script>
</body>
</html>


















