
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sains Quality Computer</title>

<link rel="icon" href="logo.png">
<script src="https://unpkg.com/html5-qrcode"></script>

<style>
body{
font-family:Arial;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
margin:0;
color:white;
text-align:center;
}

.header{
background:black;
padding:15px;
font-size:22px;
font-weight:bold;
}

.jam{
font-size:18px;
margin-top:5px;
color:#00ffcc;
}

.container{
background:white;
color:black;
margin:20px;
padding:20px;
border-radius:15px;
box-shadow:0 0 20px rgba(0,0,0,0.4);
}

input,select,button{
padding:10px;
margin:5px;
width:90%;
border-radius:8px;
border:1px solid #ccc;
}

button{
background:#007bff;
color:white;
font-weight:bold;
}

table{
width:100%;
margin-top:15px;
border-collapse:collapse;
}

th,td{
border:1px solid #ccc;
padding:8px;
font-size:13px;
}

th{
background:#007bff;
color:white;
}

.logo{
width:80px;
margin-top:10px;
}

.loginbox{
margin-top:100px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginPage" class="loginbox">
<img src="logo.png" class="logo">
<h2>Sains Quality Computer</h2>
<input type="password" id="pass" placeholder="Password">
<br>
<button onclick="login()">LOGIN</button>
</div>

<!-- APP -->
<div id="app" style="display:none;">
<div class="header">
Sains Quality Service Center
<div class="jam" id="jam"></div>
</div>

<div class="container">
<h3>Input Barang Service</h3>

<input id="nama" placeholder="Nama Barang">
<input id="sn" placeholder="Serial Number">
<input id="ket" placeholder="Keterangan / Keluhan">

<!-- FOTO HP -->
<input type="file" id="foto" accept="image/*" capture="environment">

<!-- SCAN BARCODE -->
<br>
<button onclick="startScan()">SCAN BARCODE</button>
<div id="reader" style="width:250px;margin:auto;"></div>

<select id="status">
<option>Masuk</option>
<option>Selesai</option>
<option>Diambil</option>
</select>

<br>
<button onclick="tambah()">SIMPAN</button>
<button onclick="download()">DOWNLOAD EXCEL</button>
<button onclick="printStruk()">PRINT</button>
<button onclick="backup()">BACKUP</button>
<button onclick="restore()">RESTORE</button>

<table id="tabel"></table>

</div>
</div>

<audio id="beep">
<source src="https://www.soundjay.com/misc/sounds/barcode-beep.mp3">
</audio>

<script>

let data = JSON.parse(localStorage.getItem("dataService")) || [];

// LOGIN
function login(){
let p=document.getElementById("pass").value;
if(p==="12345"){
document.getElementById("loginPage").style.display="none";
document.getElementById("app").style.display="block";
render();
}else{
alert("Password salah");
}
}

// JAM
function jam(){
document.getElementById("jam").innerHTML=new Date().toLocaleString();
}
setInterval(jam,1000);

// TAMBAH
function tambah(){

let nama = document.getElementById("nama").value;
let sn = document.getElementById("sn").value;
let ket = document.getElementById("ket").value;
let status = document.getElementById("status").value;
let fileInput = document.getElementById("foto");
let file = fileInput.files[0];

if(nama.trim()==""){
alert("Isi nama barang dulu bro");
return;
}

let waktu = new Date().toLocaleString();

// ADA FOTO
if(file){
let reader = new FileReader();

reader.onload = function(e){
let foto = e.target.result;

data.push({
waktu:waktu,
foto:foto,
nama:nama,
sn:sn,
ket:ket,
status:status
});

localStorage.setItem("dataService", JSON.stringify(data));
render();
document.getElementById("beep").play();
}

reader.readAsDataURL(file);

}else{
// TANPA FOTO
data.push({
waktu:waktu,
foto:"",
nama:nama,
sn:sn,
ket:ket,
status:status
});

localStorage.setItem("dataService", JSON.stringify(data));
render();
document.getElementById("beep").play();
}
}


// RENDER
function render(){
let html=`
<tr>
<th>Waktu</th>
<th>Foto</th>
<th>Barang</th>
<th>SN</th>
<th>Keterangan</th>
<th>Status</th>
<th>Aksi</th>
</tr>`;

data.forEach((d,i)=>{
html+=`
<tr>
<td>${d.waktu}</td>
<td>${d.foto?'<img src="'+d.foto+'" width="60">':""}</td>
<td>${d.nama}</td>
<td>${d.sn}</td>
<td>${d.ket || "-"}</td>
<td>${d.status}</td>
<td>
<button onclick="print1(${i})">üñ® Print</button>
<button onclick="hapus(${i})">Hapus</button>
</td>

</tr>`;

document.getElementById("tabel").innerHTML=html;
}


// HAPUS
function hapus(i){
let pass=prompt("Password hapus:");
if(pass!=="admin123"){alert("Salah");return;}
data.splice(i,1);
localStorage.setItem("dataService",JSON.stringify(data));
render();
}

// DOWNLOAD EXCEL
function download(){
let table=document.getElementById("tabel").outerHTML;
let url='data:application/vnd.ms-excel,'+ encodeURIComponent(table);
let a=document.createElement("a");
a.href=url;
a.download="data_service.xls";
a.click();
}

// PRINT
function printStruk(){
let isi=document.getElementById("tabel").outerHTML;
let win=window.open("");
win.document.write("<h3>Sains Quality Service</h3>"+isi);
win.print();
}

// BACKUP
function backup(){
let blob=new Blob([JSON.stringify(data)]);
let a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="backup.txt";
a.click();
}

// RESTORE
function restore(){
let txt=prompt("Paste backup:");
if(txt){
data=JSON.parse(txt);
localStorage.setItem("dataService",JSON.stringify(data));
render();
}
}

// SCAN BARCODE
function startScan(){
document.getElementById("reader").innerHTML="";
let scanner=new Html5Qrcode("reader");

scanner.start(
{ facingMode:"environment"},
{ fps:10, qrbox:250 },
(qr)=>{
document.getElementById("sn").value=qr;
document.getElementById("beep").play();
scanner.stop();
document.getElementById("reader").innerHTML="";
},
(err)=>{}
);
}


// PRINT STRUK 1 DATA
function print1(i){
let d = data[i];
let no = "SRV"+Math.floor(Math.random()*99999);

let win = window.open("", "", "width=400,height=700");

win.document.write(`
<html>
<head>
<title>Struk Service</title>

<style>
body{font-family:Arial;padding:15px;width:300px}
.logo{width:70px;display:block;margin:auto}
h2{text-align:center;margin:5px}
hr{border:1px dashed black;margin:8px 0}
table{width:100%;font-size:13px}
td{padding:3px;vertical-align:top}
.footer{text-align:center;margin-top:15px;font-size:12px}
</style>
</head>

<body>

<img src="logo.png" class="logo">
<h2>Sains Quality Service Center</h2>
<div style="text-align:center;font-size:12px">
Jl Rusin 2 No.56<br>
HP: 085692459331
</div>

<hr>

<table>
<tr><td>No Service</td><td>: ${no}</td></tr>
<tr><td>Tanggal</td><td>: ${d.waktu}</td></tr>
<tr><td>Barang</td><td>: ${d.nama}</td></tr>
<tr><td>SN</td><td>: ${d.sn}</td></tr>
<tr><td>Keluhan</td><td>: ${d.ket}</td></tr>
<tr><td>Status</td><td>: ${d.status}</td></tr>
</table>

<hr>

<div class="footer">
Terima kasih üôè<br>
Barang tidak diambil 30 hari<br>
bukan tanggung jawab kami
</div>

<br><br>

<table style="width:100%;text-align:center">
<tr>
<td>Customer</td>
<td>Admin</td>
</tr>
<tr>
<td style="height:50px"></td>
<td></td>
</tr>
<tr>
<td>(________)</td>
<td>(________)</td>
</tr>
</table>

<script>
window.print();
</script>

</body>
</html>






































